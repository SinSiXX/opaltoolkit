<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="edu.sdsc.nbcr.opal.state">

    <class name="JobInfo" table="job_info">
        <id name="jobID" column="job_id" type="string">
            <generator class="assigned"/>
        </id>

        <property name="code" type="integer" column="code" not-null="true"/>

        <property name="message" type="string" column="message" not-null="true"/>

        <property name="baseURL" type="string" column="base_url" not-null="true"/>

        <property name="handle" type="string" column="handle"/>

        <property name="startTime" type="timestamp" column="start_time"/>

        <property name="lastUpdate" type="timestamp" column="last_update"/>

        <property name="clientDN" type="string" column="client_dn"/>

        <property name="clientIP" type="string" column="client_ip"/>

        <property name="serviceName" type="string" column="service_name"/>
    </class>

    <class name="JobOutput" table="job_output">
        <id name="id">
            <generator class="native"/>
        </id>

        <property name="stdOut" type="string" column="std_out" not-null="true"/>
 
        <property name="stdErr" type="string" column="std_err" not-null="true"/>
 
	<many-to-one name="job" column="job_id" class="JobInfo" unique="true" not-null="true"/>
    </class>

    <class name="OutputFile" table="output_file">
        <id name="id">
            <generator class="native"/>
        </id>

        <property name="url" type="string" column="url" not-null="true"/>

        <property name="name" type="string" column="name" not-null="true"/>

	<many-to-one name="job" column="job_id" class="JobInfo" not-null="true"/>
    </class>
</hibernate-mapping>